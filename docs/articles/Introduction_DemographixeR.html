<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Introduction to DemografixeR • DemografixeR</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Introduction to DemografixeR">
<meta property="og:description" content="DemografixeR">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-163782273-1"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-163782273-1');
</script>
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">DemografixeR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/Introduction_DemographixeR.html">Introduction to DemografixeR</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/matbmeijer/DemografixeR/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Introduction to DemografixeR</h1>
                        <h4 class="author">Matthias Brenninkmeijer</h4>
            
            <h4 class="date">2020-05-04</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/matbmeijer/DemografixeR/blob/master/vignettes/Introduction_DemographixeR.Rmd"><code>vignettes/Introduction_DemographixeR.Rmd</code></a></small>
      <div class="hidden name"><code>Introduction_DemographixeR.Rmd</code></div>

    </div>

    
    
<div id="introduction" class="section level2">
<h2 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h2>
<p>Let’s illustrate the usefulness of <em>DemografixeR</em> with a simple example. Say we know the first name of a sample of customers, but useful information about gender, age or nationality is unavailable:</p>
<table class="table"><tbody><tr class="odd">
<td align="left"><strong>Customers:</strong></td>
<td align="left">Maria</td>
<td align="left">Ben</td>
<td align="left">Claudia</td>
<td align="left">Adam</td>
<td align="left">Hannah</td>
<td align="left">Robert</td>
</tr></tbody></table>
<p>It’s common knowledge that names have a strong sociocultural influence - names’ popularity vary across time and location - and these naming conventions may be good predictors for other useful variables such as <strong>gender</strong>, <strong>age</strong> &amp; <strong>nationality</strong>. Here’s where <em>DemografixeR</em> comes in:</p>
<blockquote>
<p>“<em>DemografixeR</em> allows R users to connect directly to the (1) <a href="https://genderize.io"><em>genderize.io API</em></a>, the (2) <a href="https://agify.io/"><em>agify.io API</em></a> and the (3) <a href="https://nationalize.io/"><em>nationalize.io API</em></a> to obtain the (1) <strong>gender</strong>, (2) <strong>age</strong> &amp; (3) <strong>nationality</strong> of a name in a tidy format.”</p>
</blockquote>
<p><em>DemografixeR</em> deals with the hassle of API pagination, missing values, duplicated names, trimming whitespace and parsing the results in a tidy format, giving the user time to analyze instead of tidying the data.</p>
<p>To do so, <em>DemografixeR</em> is based on these three main pillar functions, which we will use to predict the key demographic variables of the previous sample of customers, so that we can ‘fix’ the missing demographic information:</p>
<table class="table">
<thead><tr class="header">
<th align="left">API</th>
<th align="left">R function</th>
<th align="left">Estimated variable</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left"><a href="https://genderize.io" class="uri">https://genderize.io</a></td>
<td align="left"><code><a href="../reference/genderize.html">genderize(name)</a></code></td>
<td align="left">Gender</td>
</tr>
<tr class="even">
<td align="left"><a href="https://agify.io" class="uri">https://agify.io</a></td>
<td align="left"><code><a href="../reference/agify.html">agify(name)</a></code></td>
<td align="left">Age</td>
</tr>
<tr class="odd">
<td align="left"><a href="https://nationalize.io" class="uri">https://nationalize.io</a></td>
<td align="left"><code><a href="../reference/nationalize.html">nationalize(name)</a></code></td>
<td align="left">Nationality</td>
</tr>
</tbody>
</table>
<p>They all work similarly, and allow to be integrated in multiple workflows. Using the previous group of customers, we can obtain the following results:</p>
<table class="table"><tbody>
<tr class="odd">
<td align="left"><strong>Customers:</strong></td>
<td align="left">Maria</td>
<td align="left">Ben</td>
<td align="left">Claudia</td>
<td align="left">Adam</td>
<td align="left">Hannah</td>
<td align="left">Robert</td>
</tr>
<tr class="even">
<td align="left"><strong>Estimated gender:</strong></td>
<td align="left">female</td>
<td align="left">male</td>
<td align="left">female</td>
<td align="left">male</td>
<td align="left">female</td>
<td align="left">male</td>
</tr>
<tr class="odd">
<td align="left"><strong>Estimated age:</strong></td>
<td align="left">21</td>
<td align="left">48</td>
<td align="left">45</td>
<td align="left">34</td>
<td align="left">27</td>
<td align="left">59</td>
</tr>
<tr class="even">
<td align="left"><strong>Estimated nationality:</strong></td>
<td align="left">CY</td>
<td align="left">AU</td>
<td align="left">CL</td>
<td align="left">PL</td>
<td align="left">SL</td>
<td align="left">US</td>
</tr>
</tbody></table>
<p>To see how to get to these results, read on!</p>
</div>
<div id="get-started" class="section level2">
<h2 class="hasAnchor">
<a href="#get-started" class="anchor"></a>Get Started</h2>
<div id="setup" class="section level3">
<h3 class="hasAnchor">
<a href="#setup" class="anchor"></a>Setup</h3>
<p>First, we need to load the package:</p>
<div class="sourceCode" id="cb1"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="st">"DemografixeR"</span>)</pre></body></html></div>
</div>
<div id="api-credentials" class="section level3">
<h3 class="hasAnchor">
<a href="#api-credentials" class="anchor"></a>API credentials</h3>
<p>The following step is optional, it is only necessary if you plan to estimate gender, age or nationality for more than 1000 different names a day. To do so, you need to obtain an API key from the following link:</p>
<ul>
<li><a href="https://store.genderize.io"><em>genderize.io store</em></a></li>
</ul>
<p>To use the API key, simply save it only once with the <strong><code><a href="../reference/save_api_key.html">save_api_key(key)</a></code></strong> and you’re all set. All the functions will automatically retrieve the key once saved:</p>
<div class="sourceCode" id="cb2"><html><body><pre class="r"><span class="fu"><a href="../reference/save_api_key.html">save_api_key</a></span>(<span class="kw">key</span> <span class="kw">=</span> <span class="st">"__YOUR_API_KEY__"</span>)</pre></body></html></div>
<p>Please be careful when dealing with secrets/tokens/credentials and do not share them publicly. Yet, if you wish explicitly know which API key you’ve saved, retrieve it with the <strong><code><a href="../reference/get_api_key.html">get_api_key()</a></code></strong> function. To fully remove the saved key use the <strong><code><a href="../reference/remove_api_key.html">remove_api_key()</a></code></strong> function.</p>
</div>
<div id="gender" class="section level3">
<h3 class="hasAnchor">
<a href="#gender" class="anchor"></a>Gender</h3>
<p>We start by <strong>predicting the gender</strong> from our customers. For this we use the <strong><code><a href="../reference/genderize.html">genderize(name)</a></code></strong> function:</p>
<div class="sourceCode" id="cb3"><html><body><pre class="r"><span class="no">customers_names</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Maria"</span>, <span class="st">"Ben"</span>, <span class="st">"Claudia"</span>,
                     <span class="st">"Adam"</span>, <span class="st">"Hannah"</span>, <span class="st">"Robert"</span>)
<span class="no">customers_predicted_gender</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/genderize.html">genderize</a></span>(<span class="kw">name</span> <span class="kw">=</span> <span class="no">customers_names</span>)
<span class="no">customers_predicted_gender</span> <span class="co"># Print results</span>
<span class="co">#&gt; [1] "female" "male"   "female" "male"   "female" "male"</span></pre></body></html></div>
<p>We see that <code><a href="../reference/genderize.html">genderize(name)</a></code> returns the estimated gender for each name as a <code>character</code> vector:</p>
<div class="sourceCode" id="cb4"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span>(<span class="no">customers_predicted_gender</span>)
<span class="co">#&gt; [1] "character"</span></pre></body></html></div>
<p>Yet, it is also possible to obtain a detailed <code>data.frame</code> object with additional information. <em>DemografixeR</em> also allows to use ‘pipes’:</p>
<div class="sourceCode" id="cb5"><html><body><pre class="r"><span class="no">gender_df</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/genderize.html">genderize</a></span>(<span class="kw">name</span> <span class="kw">=</span> <span class="no">customers_names</span>, <span class="kw">simplify</span> <span class="kw">=</span> <span class="fl">FALSE</span>)
<span class="no">customers_names</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/genderize.html">genderize</a></span>(<span class="kw">simplify</span> <span class="kw">=</span> <span class="fl">FALSE</span>) <span class="kw">%&gt;%</span>
  <span class="kw pkg">knitr</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span>(<span class="kw">row.names</span> <span class="kw">=</span> <span class="fl">FALSE</span>)</pre></body></html></div>
<table class="table">
<thead><tr class="header">
<th align="left">name</th>
<th align="left">type</th>
<th align="left">gender</th>
<th align="right">probability</th>
<th align="right">count</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Maria</td>
<td align="left">gender</td>
<td align="left">female</td>
<td align="right">0.98</td>
<td align="right">334287</td>
</tr>
<tr class="even">
<td align="left">Ben</td>
<td align="left">gender</td>
<td align="left">male</td>
<td align="right">0.95</td>
<td align="right">77991</td>
</tr>
<tr class="odd">
<td align="left">Claudia</td>
<td align="left">gender</td>
<td align="left">female</td>
<td align="right">0.98</td>
<td align="right">118604</td>
</tr>
<tr class="even">
<td align="left">Adam</td>
<td align="left">gender</td>
<td align="left">male</td>
<td align="right">0.98</td>
<td align="right">116396</td>
</tr>
<tr class="odd">
<td align="left">Hannah</td>
<td align="left">gender</td>
<td align="left">female</td>
<td align="right">0.97</td>
<td align="right">13198</td>
</tr>
<tr class="even">
<td align="left">Robert</td>
<td align="left">gender</td>
<td align="left">male</td>
<td align="right">0.99</td>
<td align="right">177418</td>
</tr>
</tbody>
</table>
</div>
<div id="age" class="section level3">
<h3 class="hasAnchor">
<a href="#age" class="anchor"></a>Age</h3>
<p>We continue with the <strong>age</strong> estimation of our customers. As with the <strong><code><a href="../reference/genderize.html">genderize(name)</a></code></strong> function, the <code>simplify</code> parameter also works with the <strong><code><a href="../reference/agify.html">agify(name)</a></code></strong> function to retrieve a <code>data.frame</code>:</p>
<div class="sourceCode" id="cb6"><html><body><pre class="r"><span class="no">customers_predicted_age</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/agify.html">agify</a></span>(<span class="kw">name</span> <span class="kw">=</span> <span class="no">customers_names</span>, <span class="kw">simplify</span> <span class="kw">=</span> <span class="fl">FALSE</span>)
<span class="no">customers_predicted_age</span>

<span class="no">customers_names</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/agify.html">agify</a></span>(<span class="kw">simplify</span> <span class="kw">=</span> <span class="fl">FALSE</span>) <span class="kw">%&gt;%</span>
  <span class="kw pkg">knitr</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span>(<span class="kw">row.names</span> <span class="kw">=</span> <span class="fl">FALSE</span>)</pre></body></html></div>
<table class="table">
<thead><tr class="header">
<th align="left">name</th>
<th align="left">type</th>
<th align="right">age</th>
<th align="right">count</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Maria</td>
<td align="left">age</td>
<td align="right">21</td>
<td align="right">517258</td>
</tr>
<tr class="even">
<td align="left">Ben</td>
<td align="left">age</td>
<td align="right">48</td>
<td align="right">75632</td>
</tr>
<tr class="odd">
<td align="left">Claudia</td>
<td align="left">age</td>
<td align="right">45</td>
<td align="right">110105</td>
</tr>
<tr class="even">
<td align="left">Adam</td>
<td align="left">age</td>
<td align="right">34</td>
<td align="right">110754</td>
</tr>
<tr class="odd">
<td align="left">Hannah</td>
<td align="left">age</td>
<td align="right">27</td>
<td align="right">12843</td>
</tr>
<tr class="even">
<td align="left">Robert</td>
<td align="left">age</td>
<td align="right">59</td>
<td align="right">160915</td>
</tr>
</tbody>
</table>
</div>
<div id="nationality" class="section level3">
<h3 class="hasAnchor">
<a href="#nationality" class="anchor"></a>Nationality</h3>
<p>Last but not least, we finish with the <strong>nationality</strong> extrapolation. Equally as with the <strong><code><a href="../reference/genderize.html">genderize(name)</a></code></strong> and <strong><code><a href="../reference/agify.html">agify(name)</a></code></strong> function, the <code>simplify</code> parameter also works with the <strong><code><a href="../reference/nationalize.html">nationalize(name)</a></code></strong> function to retrieve a <code>data.frame</code>:</p>
<div class="sourceCode" id="cb7"><html><body><pre class="r"><span class="no">customers_predicted_nationality</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/nationalize.html">nationalize</a></span>(<span class="kw">name</span> <span class="kw">=</span> <span class="no">customers_names</span>, <span class="kw">simplify</span> <span class="kw">=</span> <span class="fl">FALSE</span>)
<span class="no">customers_predicted_nationality</span>

<span class="no">customers_names</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/nationalize.html">nationalize</a></span>(<span class="kw">simplify</span> <span class="kw">=</span> <span class="fl">FALSE</span>) <span class="kw">%&gt;%</span>
  <span class="kw pkg">knitr</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span>(<span class="kw">row.names</span> <span class="kw">=</span> <span class="fl">FALSE</span>)</pre></body></html></div>
<table class="table">
<thead><tr class="header">
<th align="left">name</th>
<th align="left">type</th>
<th align="left">country_id</th>
<th align="right">probability</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Maria</td>
<td align="left">nationality</td>
<td align="left">CY</td>
<td align="right">0.0550798</td>
</tr>
<tr class="even">
<td align="left">Ben</td>
<td align="left">nationality</td>
<td align="left">AU</td>
<td align="right">0.0665534</td>
</tr>
<tr class="odd">
<td align="left">Claudia</td>
<td align="left">nationality</td>
<td align="left">CL</td>
<td align="right">0.0559340</td>
</tr>
<tr class="even">
<td align="left">Adam</td>
<td align="left">nationality</td>
<td align="left">PL</td>
<td align="right">0.0905836</td>
</tr>
<tr class="odd">
<td align="left">Hannah</td>
<td align="left">nationality</td>
<td align="left">SL</td>
<td align="right">0.2673254</td>
</tr>
<tr class="even">
<td align="left">Robert</td>
<td align="left">nationality</td>
<td align="left">US</td>
<td align="right">0.0909442</td>
</tr>
</tbody>
</table>
</div>
<div id="other-parameters" class="section level3">
<h3 class="hasAnchor">
<a href="#other-parameters" class="anchor"></a>Other parameters</h3>
<div id="country_id-parameter" class="section level4">
<h4 class="hasAnchor">
<a href="#country_id-parameter" class="anchor"></a><strong><code>country_id</code></strong> parameter</h4>
<p>Responses of names will in a lot of cases be more accurate if the data is narrowed to a specific country. Luckily, both the <strong><code><a href="../reference/genderize.html">genderize(name)</a></code></strong> and <strong><code><a href="../reference/agify.html">agify(name)</a></code></strong> function support passing a country code parameter (following the common ISO 3166-1 alpha-2 country code convention). For obvious reasons the <strong><code><a href="../reference/nationalize.html">nationalize(name)</a></code></strong> does not:</p>
<div class="sourceCode" id="cb8"><html><body><pre class="r"><span class="no">us_customers_predicted_gender</span><span class="kw">&lt;-</span><span class="fu"><a href="../reference/genderize.html">genderize</a></span>(<span class="kw">name</span> <span class="kw">=</span> <span class="no">customers_names</span>,
                                         <span class="kw">country_id</span> <span class="kw">=</span> <span class="st">"US"</span>)
<span class="no">us_customers_predicted_gender</span>
<span class="co">#&gt; [1] "female" "male"   "female" "male"   "female" "male"</span>

<span class="no">us_customers_predicted_age</span><span class="kw">&lt;-</span><span class="fu"><a href="../reference/agify.html">agify</a></span>(<span class="kw">name</span> <span class="kw">=</span> <span class="no">customers_names</span>,
                                  <span class="kw">country_id</span> <span class="kw">=</span> <span class="st">"US"</span>)
<span class="no">us_customers_predicted_age</span>
<span class="co">#&gt; [1] NA 67 69 65 54 70</span></pre></body></html></div>
<p>To obtain a <code>data.frame</code> of all supported countries, use the <strong><code><a href="../reference/supported_countries.html">supported_countries(type)</a></code></strong> function. Here’s an example of 5 countries:</p>
<div class="sourceCode" id="cb9"><html><body><pre class="r"><span class="fu"><a href="../reference/supported_countries.html">supported_countries</a></span>(<span class="kw">type</span> <span class="kw">=</span> <span class="st">"genderize"</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(<span class="fl">5</span>) <span class="kw">%&gt;%</span>
  <span class="kw pkg">knitr</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span>(<span class="kw">row.names</span> <span class="kw">=</span> <span class="fl">FALSE</span>)</pre></body></html></div>
<table class="table">
<thead><tr class="header">
<th align="left">country_id</th>
<th align="left">name</th>
<th align="right">total</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">AD</td>
<td align="left">Andorra</td>
<td align="right">29783</td>
</tr>
<tr class="even">
<td align="left">AE</td>
<td align="left">United Arab Emirates</td>
<td align="right">145847</td>
</tr>
<tr class="odd">
<td align="left">AF</td>
<td align="left">Afghanistan</td>
<td align="right">23531</td>
</tr>
<tr class="even">
<td align="left">AG</td>
<td align="left">Antigua and Barbuda</td>
<td align="right">1723</td>
</tr>
<tr class="odd">
<td align="left">AI</td>
<td align="left">Anguilla</td>
<td align="right">1081</td>
</tr>
</tbody>
</table>
<p>In this case the <code>total</code> column reflects the number of observations the API has for each country. The beauty of the <code>country_id</code> parameter lies in that it allows to pass a single <code>character</code> string or a <code>character</code> vector with the same length as the <code>name</code> parameter. An example illustrates this better:</p>
<div class="sourceCode" id="cb10"><html><body><pre class="r"><span class="fu"><a href="../reference/agify.html">agify</a></span>(<span class="kw">name</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Hannah"</span>, <span class="st">"Ben"</span>),
      <span class="kw">country_id</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"US"</span>, <span class="st">"GB"</span>),
      <span class="kw">simplify</span> <span class="kw">=</span> <span class="fl">FALSE</span>) <span class="kw">%&gt;%</span>
  <span class="kw pkg">knitr</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span>(<span class="kw">row.names</span> <span class="kw">=</span> <span class="fl">FALSE</span>)</pre></body></html></div>
<table class="table">
<thead><tr class="header">
<th align="left">name</th>
<th align="left">type</th>
<th align="right">age</th>
<th align="right">count</th>
<th align="left">country_id</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Hannah</td>
<td align="left">age</td>
<td align="right">54</td>
<td align="right">67</td>
<td align="left">US</td>
</tr>
<tr class="even">
<td align="left">Ben</td>
<td align="left">age</td>
<td align="right">38</td>
<td align="right">1980</td>
<td align="left">GB</td>
</tr>
</tbody>
</table>
<p>In this previous example we passed two names - Hannah &amp; Ben - and two country codes - US &amp; GB. Thus, the functions allow to pass vectorized vectors - this is especially useful for workflows where we are using a <code>data.frame</code> with a variable with names and another variable containing country codes.</p>
</div>
<div id="meta-parameter" class="section level4">
<h4 class="hasAnchor">
<a href="#meta-parameter" class="anchor"></a><strong><code>meta</code></strong> parameter</h4>
<p>All three functions have a parameter defined as <code>meta</code>, which returns information about the API itself, such as:</p>
<ul>
<li>The amount of names available in the current time window</li>
<li>The number of names left in the current time window</li>
<li>Seconds remaining until a new time window opens</li>
</ul>
<p>Here’s an example:</p>
<div class="sourceCode" id="cb11"><html><body><pre class="r"><span class="fu"><a href="../reference/genderize.html">genderize</a></span>(<span class="kw">name</span> <span class="kw">=</span> <span class="st">"Hannah"</span>,
          <span class="kw">simplify</span> <span class="kw">=</span> <span class="fl">FALSE</span>,
          <span class="kw">meta</span> <span class="kw">=</span> <span class="fl">TRUE</span>) <span class="kw">%&gt;%</span>
  <span class="kw pkg">knitr</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span>(<span class="kw">row.names</span> <span class="kw">=</span> <span class="fl">FALSE</span>)</pre></body></html></div>
<table class="table">
<thead><tr class="header">
<th align="left">name</th>
<th align="left">type</th>
<th align="left">gender</th>
<th align="right">probability</th>
<th align="right">count</th>
<th align="right">api_rate_limit</th>
<th align="right">api_rate_remaining</th>
<th align="right">api_rate_reset</th>
<th align="left">api_request_timestamp</th>
</tr></thead>
<tbody><tr class="odd">
<td align="left">Hannah</td>
<td align="left">gender</td>
<td align="left">female</td>
<td align="right">0.97</td>
<td align="right">13198</td>
<td align="right">1000</td>
<td align="right">370</td>
<td align="right">6777</td>
<td align="left">2020-05-03 22:07:02</td>
</tr></tbody>
</table>
</div>
<div id="sliced-parameter" class="section level4">
<h4 class="hasAnchor">
<a href="#sliced-parameter" class="anchor"></a><strong><code>sliced</code></strong> parameter</h4>
<p>The <strong><code><a href="../reference/nationalize.html">nationalize(name)</a></code></strong> function has the useful <strong><code>sliced</code></strong> parameter. Logically, names can have multiple estimated nationalities - and the <strong><code><a href="../reference/nationalize.html">nationalize(name)</a></code></strong> function automatically ranks them by probability. This logical parameter allows to ‘slice’/keep only the value with the highest probability to keep a single estimate for each name (one country per name) - and is set by default to <code>TRUE</code>. But you may wish to see all to potential countries a name can be associated to. For this simply set the parameter to <code>FALSE</code>:</p>
<div class="sourceCode" id="cb12"><html><body><pre class="r"><span class="fu"><a href="../reference/nationalize.html">nationalize</a></span>(<span class="kw">name</span> <span class="kw">=</span> <span class="st">"Matthias"</span>,
            <span class="kw">simplify</span> <span class="kw">=</span> <span class="fl">FALSE</span>,
            <span class="kw">sliced</span><span class="kw">=</span><span class="fl">FALSE</span>) <span class="kw">%&gt;%</span>
  <span class="kw pkg">knitr</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span>(<span class="kw">row.names</span> <span class="kw">=</span> <span class="fl">FALSE</span>)</pre></body></html></div>
<table class="table">
<thead><tr class="header">
<th align="left">name</th>
<th align="left">type</th>
<th align="left">country_id</th>
<th align="right">probability</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Matthias</td>
<td align="left">nationality</td>
<td align="left">DE</td>
<td align="right">0.4161638</td>
</tr>
<tr class="even">
<td align="left">Matthias</td>
<td align="left">nationality</td>
<td align="left">AT</td>
<td align="right">0.2650625</td>
</tr>
<tr class="odd">
<td align="left">Matthias</td>
<td align="left">nationality</td>
<td align="left">CH</td>
<td align="right">0.1106922</td>
</tr>
</tbody>
</table>
<p>In the last example you see that instead of returning a single country code, it returns multiple country codes with their associated probability.</p>
</div>
</div>
</div>
<div id="customers-example" class="section level2">
<h2 class="hasAnchor">
<a href="#customers-example" class="anchor"></a>Customers example</h2>
<p>Let’s replicate the initial example with our group of customers. Voilà!</p>
<div class="sourceCode" id="cb13"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">dplyr</span>, <span class="kw">quietly</span> <span class="kw">=</span> <span class="fl">TRUE</span>, <span class="kw">warn.conflicts</span> <span class="kw">=</span> <span class="fl">FALSE</span>)

<span class="no">df</span><span class="kw">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span>(<span class="st">"Customers:"</span><span class="kw">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Maria"</span>, <span class="st">"Ben"</span>, <span class="st">"Claudia"</span>,
                           <span class="st">"Adam"</span>, <span class="st">"Hannah"</span>, <span class="st">"Robert"</span>),
               <span class="kw">stringsAsFactors</span> <span class="kw">=</span> <span class="fl">FALSE</span>,
               <span class="kw">check.names</span> <span class="kw">=</span> <span class="fl">FALSE</span>)

<span class="no">df</span> <span class="kw">&lt;-</span> <span class="no">df</span> <span class="kw">%&gt;%</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="kw">`Estimated gender:`</span><span class="kw">=</span> <span class="fu"><a href="../reference/genderize.html">genderize</a></span>(<span class="no">`Customers:`</span>),
                    <span class="kw">`Estimated age:`</span><span class="kw">=</span> <span class="fu"><a href="../reference/agify.html">agify</a></span>(<span class="no">`Customers:`</span>),
                    <span class="kw">`Estimated nationality:`</span><span class="kw">=</span> <span class="fu"><a href="../reference/nationalize.html">nationalize</a></span>(<span class="no">`Customers:`</span>))

<span class="no">df</span> <span class="kw">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/base/t.html">t</a></span>() <span class="kw">%&gt;%</span> <span class="kw pkg">knitr</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span>(<span class="kw">col.names</span> <span class="kw">=</span> <span class="kw">NULL</span>)</pre></body></html></div>
<table class="table"><tbody>
<tr class="odd">
<td align="left">Customers:</td>
<td align="left">Maria</td>
<td align="left">Ben</td>
<td align="left">Claudia</td>
<td align="left">Adam</td>
<td align="left">Hannah</td>
<td align="left">Robert</td>
</tr>
<tr class="even">
<td align="left">Estimated gender:</td>
<td align="left">female</td>
<td align="left">male</td>
<td align="left">female</td>
<td align="left">male</td>
<td align="left">female</td>
<td align="left">male</td>
</tr>
<tr class="odd">
<td align="left">Estimated age:</td>
<td align="left">21</td>
<td align="left">48</td>
<td align="left">45</td>
<td align="left">34</td>
<td align="left">27</td>
<td align="left">59</td>
</tr>
<tr class="even">
<td align="left">Estimated nationality:</td>
<td align="left">CY</td>
<td align="left">AU</td>
<td align="left">CL</td>
<td align="left">PL</td>
<td align="left">SL</td>
<td align="left">US</td>
</tr>
</tbody></table>
</div>
<div id="further-information" class="section level2">
<h2 class="hasAnchor">
<a href="#further-information" class="anchor"></a>Further information</h2>
<p>For more information access the package documentation at <a href="https://matbmeijer.github.io/DemografixeR/">https://matbmeijer.github.io/DemografixeR</a>.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Matthias Brenninkmeijer.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.0.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
